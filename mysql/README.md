# Mysql

[官网](https://www.mysql.com/)

[下载](https://dev.mysql.com/downloads/mysql/)

[文档](https://dev.mysql.com/doc/refman/8.0/en/)

Version: 8.0

## ACID

1. Atomicity:原子性
    * 一个事务中的操作，要么全部成功，要么全部失败，如果失败，就回滚到事务开始前的状态。
2. Consistency:一致性
    * 一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事务执行之前和执行之后都必须处于一致性状态。
    * 转账举栗子，A账户和B账户之间相互转账，无论如何操作，A、B账户的总金额都必须是不变的。
3. Isolation:隔离性
    * 隔离性是当多个用户 并发的 访问数据库时，如果操作同一张表，数据库则为每一个用户都开启一个事务，且事务之间互不干扰，也就是说事务之间的并发是隔离的。
    * 举个栗子，现有两个并发的事务T1和T2，T1要么在T2开始前执行，要么在T2结束后执行，如果T1先执行，那T2就在T1结束后在执行。
4. Durability:持久性
    * 持久性就是指如果事务一旦被提交，数据库中数据的改变就是永久性的，即使断电或者宕机的情况下，也不会丢失提交的事务操作。

## 使用

连接: mysql -u username -p password

## 储存引擎

### Myisam

* ibdata1:系统数据字典信息（统计信息），undo表空间等数据
* ib_logfile0~ib_logfie1: REDO日志文件，事务日志文件
* ibtmp1: 临时表空间磁盘位置，存储临时表
* frm：存储表的列信息
* ibd：表的数据行和索引

### Innodb

## 索引

* 二叉查找树

* 红黑树

* B树

* B-树

* B+树

回表

索引覆盖

最左匹配原则

索引合并



## 事务

隔离级别

|隔离级别|脏读|不可重复读|幻读|
|:---:|:---:|:---:|:---:|
|读未提交|✔|✔|✔|
|读已提交|✖|✔|✔|
|可重复读|✖|✖|✔|
|序列化|✖|✖|✖|

* 脏读:
    * 读取到了未提交的数据
* 不可重复读
    * 同一个事务中，对于同一数据，执行完全相同的select语句时可能看到不一样的结果
* 幻读:
    * 当用户读取某数据时，另一个事务又在该范围内插入了新行，当用户再读取该范围的数据行时，会发现有新的“幻影” 行
